<!DOCTYPE html>
<html lang="en">



<!-- Mirrored from localhost:2024/map.php by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Oct 2024 16:22:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    
    <link rel="shortcut icon" href="images/favicon.webp" />
    <meta charset="utf-8">
    <!--<meta name="viewport" content="width=device-width, initial-scale=1">-->
    <title>Map - Immer in Bewegung</title>
    <link href="images/cssec4a.css?family=Cairo|Francois+One|Merriweather|Righteous" rel="stylesheet">

    <meta name="mobile-web-app-capable" content="yes">
    <link rel="manifest" href="images/manifest.json">
    <meta name="theme-color" content="#6f757e" id="themeColorMeta">
    <meta name="msapplication-navbutton-color" content="#e4e9ef">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--<link rel=icon href="favicon.webp">-->


    <style>

        /* Global */
        html {height:100%;}
        body{margin: 0;padding: 0;font-family: 'Merriweather', serif;height:100%;background-color:#f8fafd;}
        p {font-family: 'Francois+One', sans-serif;}
        
        /* Addon */
        .roundBorder { border-radius:10pt; }
        .roundBorderTop { border-top-left-radius:5pt;border-top-right-radius:5pt; }
        .roundBorderBottom { border-bottom-left-radius:10pt;border-bottom-right-radius:10pt; }
        /* .boxShadow { box-shadow: 1px 1px 10px #8f959eAA; } */
        .lightColor {background-color:#e4e9ef;}

        /* Elements */
        .tripDivision { padding:5pt;font-family: 'Francois+One', sans-serif;padding:5pt;text-align:center;color:#fff;background-color:#000; }

        .topBarContainer {z-index:1001;position:sticky;top:0;}
        .topBar {padding: 0pt;background-color:#6f757e;color:#fff;text-align: center;}
        .menuBar {display: flex;flex-wrap: wrap;background-color:#f1f1f1;justify-content: space-between;gap:1pt;border-bottom:3pt solid #6f757e;}
        .menuBar > a {background-color:#e4e9ef;font-family: 'Francois+One', sans-serif;text-align: center;flex:1;cursor:pointer;padding:5pt;color:#000;}
        .menuBar > a:hover {background-color:#8f959eAA;color:#fff;text-decoration:none;}
        
        .container {margin:0;}
        .normal { margin:20pt 0 20pt 0;line-height:1em;font-family: 'Cairo', sans-serif;font-weight:bold;color:#000;font-size:3em;text-align:center;}

        #searchStringPattern {font-family: 'Francois+One', sans-serif;font-size:14pt;border:2pt solid #6f757e;background-color:#f8fafd;padding:5pt;border-radius:10pt;}
        
        input[type=text], #searchStringPattern { font-family: 'Francois+One', sans-serif; }

        .immer-in-font-uc {font-family: 'Cairo', sans-serif;text-transform: uppercase;}
        .bewegung-font-uc {font-family: 'Righteous', sans-serif;text-transform: uppercase;}

        .trip_table, .trip_table_details {font-family: 'Francois+One', sans-serif;width:100%;}
        .trip_table_division {border:0.2em solid #000}
        thead {font-weight:bold;}
        td {padding:5pt;}

        .bar {
            padding: 5pt;
            font-family: 'Francois+One', sans-serif;
            display:flex;
            font-weight:bold;
            align-items: center;
            gap:2pt;
        }
        .imageBar{background-color: #e4e9ef;}
        .tripBar{background-color: #6f757e;border-top:1pt solid #fff;}

        .button {padding: 10pt 10pt 10pt 10pt;background-color: #004c97;color: #fff;text-align: center;margin:auto;margin-top:10pt;width:209pt;}
        .button:hover {background-color:#8f959eAA;color:#000;cursor:pointer;}
        .button_inactivated {padding: 10pt 10pt 10pt 10pt;background-color:grey;
            color: #fff;text-align: center;margin:auto;margin-top:10pt;width:209pt;cursor:default;}
        .clearButton {background-color:#6f757e;}
        .clearButton:hover {background-color:#8f959eAA; }

        /*.filterButton {background-color:#e5f2ff;border-radius:10pt;padding:4pt 7pt 4pt 7pt;cursor:pointer;}*/
        
        a {color:#1d655e;text-decoration:none;}

        hh1 {display:block;font-family: 'Cairo', sans-serif;font-weight:bold;color:#000;font-size:3em;line-height:0.8em;padding-bottom:15pt;}
        h2 {margin-bottom:0;}
        .iib-action-button {
            display: inline-block;
            background-color: #000000;
            color: #ffffff;
            padding: 2pt;
            border-radius: 2pt;
        }
        .iib-action-button:hover {
            background-color: #000000AA;
        }

        .searchButton {font-family: 'Francois+One', sans-serif;font-size:18pt;border-radius:10pt;background-color:#6f757e;color:#fff;display:flex;cursor:pointer;border:0;}
        .searchButton:hover {background-color:#8f959eAA;}

        #aboutTop, #openinLogoSmall{display:none;}

        #statComment, #statSummary tr:nth-child(even), #nightPerCountry tr:nth-child(even), #visitsPerCountry tr:nth-child(even) {
            background-color: #e4e9ef; /* Color for even rows */
        }
        #statSummary tr:nth-child(even), #visitsPerCountry tr:nth-child(even) td:first-child, #nightPerCountry tr:nth-child(even) td:first-child {
            border-top-left-radius:10pt;
            border-bottom-left-radius:10pt;
        }
        #statSummary tr:nth-child(even), #visitsPerCountry tr:nth-child(even) td:last-child, #nightPerCountry tr:nth-child(even) td:last-child {
            border-top-right-radius:10pt;
            border-bottom-right-radius:10pt;
        }

        #chartFlex {height:300pt;}
        .searchDay {background-color:#e4e9ef;}

        #trip_nav {margin-top:20pt;}

        #searchResult{height:;}

        .pg_grey {background-color:#e4e9ef;border-radius:10pt;}
        #update_message{background-color:rgb(255,248,220);}

        #selectTripTypeCurrent, #selectTripTypeAll{font-size:18pt;border-radius:10pt;border-color:#fff;width:300pt;}
        #contentS {border-radius:10pt;}

        .trip_category {font-family: 'Francois+One', sans-serif;font-size:;padding:0.2em;text-align:left;color:#fff;cursor:pointer;border-radius:3pt;display:inline-block;}

        #tripCatCont{display:flex;gap:5pt;flex-wrap:wrap;justify-content:center;margin:0 2pt 5pt 2pt;}
        .node{background-color:#6f757e;color:#fff;margin-right:2pt;}

        #country_dd, #date_dd, #searchStringPattern, input[type=text] {border:3pt solid #6f757e;background-color:#f8fafd;border-radius:10pt;}

        .style_cat{border:1px solid #000000;background-color:#000000;}
        .style_cat:hover{border:1px solid #000000BB;background-color:#000000BB;}

        .sepLine {border-bottom:1pt solid #000;}

        /* ##### ANNAN CSS FÖR MINDRE SKÄRM ##### */
        @media (max-width: 1000px ) { /*1440px*/
            .trip_image_button {font-size:;}
            .trip_table {overflow:hidden;word-break:break-all;} /* word-break:break-all; */
            .trip_table tr {display: grid;grid-template-columns: repeat(5, 1fr);}
            .trip_table_division {grid-column: 1 / span 5;}
            .trip_table_country_category {hyphens:auto;line-height:10pt;font-size:0.7em;word-break:break-all;} /* word-break:break-all; */
            #iib-foot, #lang-menu-datasetphp, #lang-menu-aboutphp, #prevDayText, #nextDayText, #backText, #openinText, #openinLogo, #lang-overview-heading {display:none;}
            #aboutTop, #openinLogoSmall {display:inline-block;}
            #selectTripTypeCurrent, #selectTripTypeAll, .topBar, .menuBar{font-size:14pt;}
            #selectTripTypeCurrent, #selectTripTypeAll{width:100pt;}
            #visitsPerCountry {font-size:9pt;margin-top:5pt;}
            #visitsPerCountry td {padding:0pt;}
            #lang-overview-paragraph {margin:5pt;}
            #tripCatCont{margin:5pt 2pt 5pt 2pt;}
            #chartFlex {height:200pt;width:150pt;}
            .normal {font-size:30pt;margin:10pt 0 10pt 0;}
            input::placeholder {font-size: 17pt;}
            #lang-overview-paragraph{display:none;}
            #trip_nav {margin-top:2pt;}
            #map {height:250pt !important;}
            #contentS{margin-top:3pt;}
            #prevTripIDAllTrips, #nextTripIDAllTrips, #prevTripIDCurrentTripType, #nextTripIDCurrentTripType {display:none;}

        }
        /* ##### ANNAN CSS FÖR MINDRE SKÄRM ##### */

        /* ##### ANNAN CSS FÖR DARK MODE ##### */
        @media (prefers-color-scheme: dark) {

            a {color:#07ad67;}
            body, .menulink, thead, .trip_table_details {background-color:#000D0D!important;}
            h1, h2,body, .menulink, thead, .trip_table_details > div {color:#fff !important;}
            
            .lightColor {background-color:#001B1B;}
            .trip_table, .trip_table_division, .trip_table_details {background-color:#001B1B !important;border:0.2em solid #002D2D !important;}

            input[type="text"], #searchStringPattern {color:#fff;border:3pt solid #002D2D !important;}
            .searchButton, .clearButton, .trip_image_button {background-color:#002D2D;}
            .searchButton:hover, .clearButton:hover, .trip_image_button:hover {background-color:#002D2D55;}
            .pg_grey { background-color:#001B1B;color:#fff; }
            .tripBar, .imagesBar{background-color:#001B1B !important;border-top:1pt solid #002D2D !important;}
            .nightNumber{color:#000;}
            .topBar{background-color:#002D2D !important;}
            #selectTripTypeAll{background-color:#001B1B !important;}
            .menuItem{background-color:#001B1B !important;color:#fff !important;}
            .menuItem:hover{background-color:#002D2D55 !important;}
            #statComment, #statSummary tr:nth-child(even), #nightPerCountry tr:nth-child(even), #visitsPerCountry tr:nth-child(even) {
                background-color: #001B1B; /* Color for even rows */
            }
            #contentS, .searchDay{background-color:#001B1B !important;}
            .menuBar {border-bottom:3pt solid #002D2D;background-color:#002D2D !important;}
            #update_message {background-color:#07ad67;color:#000;}
            #country_dd, #date_dd, #searchStringPattern, input[type=text] {border:3pt solid #002D2D !important;background-color:#001B1B !important;color:#fff;}
            .node{background-color:#002D2D;}

            .tripDivision, .iib-action-button {background-color: #002D2D !important;}
            .style_cat{border:1px solid #002D2D;background-color:#002D2D;}
            .sepLine {border-bottom:1pt solid #002D2D;}

            /* Leaflet */
            .leaflet-touch .leaflet-control-layers, .leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out{color:#fff;background-color:#002D2D !important;}
            .leaflet-control-fullscreen a {background: #FFD2D2 url('fullscreen.html') no-repeat 0 0;filter: invert(1);}
            .leaflet-container .leaflet-control-attribution{background-color:#002D2DCC !important;color:#fff;}
            .leaflet-container .leaflet-control-attribution a{color:#fff !important;}
            .leaflet-popup-content-wrapper, .leaflet-popup-tip {background-color:#002D2D !important;color:#fff !important;}
        }
        /* ##### ANNAN CSS FÖR DARK MODE ##### */

    </style>

    <script>

        const themeColorMeta = document.querySelector('meta[name="theme-color"]');

        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        themeColorMeta.setAttribute('content', '#002D2D');  // Dark mode color
        } else {
        themeColorMeta.setAttribute('content', '#6f757e');   // Light mode color
        }

        // Optional: Listen for changes in the color scheme
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        themeColorMeta.setAttribute('content', event.matches ? '#002D2D' : '#6f757e');
        });

</script>
    
</head>

<body>
    <div style="display:flex;flex-direction:column;height:100%;">

        <div class="topBarContainer">
            <div style="position:absolute;right:10pt;top:5pt;"><span id="aboutTop"><a style="font-family: 'Francois+One', sans-serif;color:#fff;" href="about.html">?</a></span></div>
            <div class="topBar" style="display:flex;align-items:center;justify-content: center; "><img src="images/frog_g_72.webp" style="height:24px;" />&nbsp;<span class="immer-in-font-uc">Immer in</span>&nbsp;<span class="bewegung-font-uc">Bewegung</span></div>
            <div class="menuBar">
                <a href="index-2.html" class="menuItem" id="lang-menu-indexphp" >Overview</a><a href="map.html" class="menuItem" id="lang-menu-mapphp"  style="font-weight:bold;">Map</a><a href="statistics.html" class="menuItem" id="lang-menu-statisticsphp" >Statistics</a><a href="dataset.html" class="menuItem" id="lang-menu-datasetphp" >Dataset</a><a href="about.html" class="menuItem" id="lang-menu-aboutphp" >About</a>            </div>
        </div>

        <div class="container" style="display: flex; flex-direction: column; height: 100vh;max-width:100%;">

<div class="bar imagesBar" style="background-color:#e4e9ef">
    <div style="flex:1;text-align:center;max-width:100%;">
        <select name="country_dd" id="country_dd" style="max-width:100%;border-radius:10pt;font-size:16pt;padding:5pt;border:3pt solid #6f757e;display:inline-block;background-color:#f8fafd;" onchange="document.location=this.value"><option value="?" id="lang-map-overall-route">Overall route for all trips</option><optgroup disabled="disabled" style="margin-top: 1em;"></optgroup><option value="?map=all_accommodation"  id="lang-map-all-accommodations">All accommodations from all countries (VERY SLOW)</option><optgroup disabled="disabled" style="margin-top: 1em;"></optgroup><option value="?country=Denmark" >Denmark – Accommodations</option>
<option value="?country=France" >France – Accommodations</option>
<option value="?country=Italy" >Italy – Accommodations</option>
<option value="?country=Netherlands" >Netherlands – Accommodations</option>
<option value="?country=Sweden" >Sweden – Accommodations</option>
</select>    </div>
</div>

        <div style="width: 100%;flex-grow:1;" id="map"></div>


<!-- BIBLIOTEK -->

        <link rel="stylesheet" href="images/leaflet.css" />
    <!--<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />-->
    <link href="images/leaflet.fullscreen.css" rel="stylesheet" />

    <script src="images/leaflet.js"></script>
    <!--<script src="https://unpkg.com/leaflet-polylinedecorator/dist/leaflet.polylineDecorator.js"></script>-->
    <script src="images/leaflet.markercluster-src.js"></script>
    <script src="images/leaflet.fullscreen.js"></script>

	<style>
		.leaflet-control-attribution a { color:#000 !important; }
	</style>

<!-- BIBLIOTEK SLUT -->

<script>
    // Initialize the map
    var map = L.map('map').setView([59.32, 18.06], 5);

    // Add a tile layer (OpenStreetMap in this example)
    L.tileLayer('images/%7by%7d.png', {
        attribution: '<a href="kml.php?type=all_overall_route">KML</a>',
        maxZoom: 19
    }).addTo(map);

    // Add fullscreen control
    map.addControl(new L.Control.Fullscreen());

    // Define different icons
    var icons = {
        //'Overview': L.icon({ iconUrl: 'img/plans_marker.php?color=000000&letter=A', iconSize: [32, 32] }),
        'Accommodation': L.icon({ iconUrl: 'img/plans_house.php?color=4798d0', iconSize: [32, 32] }),
        'Assets': L.icon({ iconUrl: 'img/plans_asset.php?color=77071d', iconSize: [32, 32] }),
    };

    // Initialize MarkerClusterGroup
    //var markerClusters = L.markerClusterGroup();

    // Helper function to transform coordinates if needed
    function transformCoordinates(coords) {
        return coords.map(coord => [coord[1], coord[0]]); // Swap [lat, lon] to [lon, lat]
    }

    // Function to handle adding GeoJSON data to a layer
    function createGeoJSONLayer(geojsonData, color, layerGroup, icon) {
        return L.geoJSON(geojsonData, {
            style: function (feature) {
                if (feature.geometry.type === 'LineString') {
                    return { color: color }; // Set line color
                }
            },
            pointToLayer: function (feature, latlng) {
                if (feature.geometry.type === 'Point') {

                    if (layerGroup == layerGroups['Overview']){
                        var letter = feature.properties.letter || 'X'; // Fallback
                        icon = L.icon({
                            iconUrl: `img/plans_marker.php?color=6f757e&letter=${letter}`,
                            iconSize: [32, 32]
                        });
                    }

                    // Create a marker with the specified icon
                    return L.marker(latlng, { icon: icons['Accommodation'] });
                    // Add the marker to the MarkerClusterGroup
                    markerClusters.addLayer(marker);
                }
            },
            onEachFeature: function (feature, layer) {
                if (feature.geometry.type === 'Point') {
                    // Add a popup to each marker with properties
                    var popupContent = '';
                    if (feature.properties) {
                        // Generate popup content from properties
                        /*for (var key in feature.properties) {
                            if (feature.properties.hasOwnProperty(key)) {
                                popupContent += `<strong>${key}:</strong> ${feature.properties[key]}<br>`;
                            }
                        }*/
                        if (feature.properties.hasOwnProperty('name')) {
                            popupContent += `<strong>${feature.properties['name']}</strong><br />`;
                        }
                        if (feature.properties.hasOwnProperty('description')) {
                            popupContent += `${feature.properties['description']}`;
                        }
			if (feature.properties.hasOwnProperty('photoId')) {
			        var thumbnail = `<br />
<b>Warning</b>:  Undefined array key 0 in <b>/www/map.php</b> on line <b>167</b><br />
<br />
<b>Warning</b>:  Trying to access array offset on value of type null in <b>/www/map.php</b> on line <b>167</b><br />
api/assets/${feature.properties['photoId']}/thumbnail`;
                            var photoUrl = `<br />
<b>Warning</b>:  Undefined array key 0 in <b>/www/map.php</b> on line <b>168</b><br />
<br />
<b>Warning</b>:  Trying to access array offset on value of type null in <b>/www/map.php</b> on line <b>168</b><br />
photos/${feature.properties['photoId']}`;
                            popupContent += `<a target="_blank" href="${photoUrl}"><img style="width:100pt;" src="${thumbnail}" /></a>`;
                        }
                    }
                    layer.bindPopup(popupContent);
                }
                // Add each layer to the layer group
                layerGroup.addLayer(layer);
            }
        });
    }

    // Function to add polyline decorators
    /*
    function addPolylineDecorators(layerGroup) {
        layerGroup.eachLayer(function(layer) {
            if (layer instanceof L.Polyline) {
                // Add an arrow decorator to the polyline
                var decorator = L.polylineDecorator(layer, {
                    patterns: [
                        { 
                            offset: 0,
                            repeat: 20,
                            symbol: L.Symbol.arrowHead({
                                pixelSize: 10,
                                pathOptions: { color: layer.options.color, weight: 2 }
                            })
                        }
                    ]
                });
                // Add the decorator to the layerGroup, not directly to the map
                layerGroup.addLayer(decorator);
            }
        });
    }*/

    // Function to calculate combined bounds of all layer groups
    function getCombinedBounds(layerGroups) {
        var combinedBounds = L.latLngBounds([]);
        for (var key in layerGroups) {
            if (layerGroups.hasOwnProperty(key)) {
                var bounds = layerGroups[key].getBounds();
                combinedBounds.extend(bounds);
            }
        }
        return combinedBounds;
    }


    // Fetch and create layers for multiple GeoJSON files
    var layerGroups = {
        'Overview': L.featureGroup(),
        'Accommodation': L.featureGroup(),
        'Assets': L.featureGroup()
    };

    Promise.allSettled([
        fetch('images/geojson7453.json?type=all_overall_route').then(response => response.json()),
        //fetch('geojson.php?type=accommodation&id=').then(response => response.json()),
        //fetch('geojson.php?type=assets&id=').then(response => response.json())
    ])
    .then(results => {
        if (results[0].status === 'fulfilled') {
            createGeoJSONLayer(results[0].value, '#6f757e', layerGroups['Overview'], icons['Overview']);
            //addPolylineDecorators(layerGroups['Overview']);
        } else {
            console.error('Failed to fetch Overview GeoJSON:', results[0].reason);
        }
/*
        if (results[1].status === 'fulfilled') {
            createGeoJSONLayer(results[1].value, '#4798d0', layerGroups['Accommodation'], icons['Accommodation']);
            addPolylineDecorators(layerGroups['Accommodation']);
        } else {
            console.error('Failed to fetch Accommodation GeoJSON:', results[1].reason);
        }

        if (results[2].status === 'fulfilled') {
            createGeoJSONLayer(results[2].value, '#77071d', layerGroups['Assets'], icons['Assets']);
            addPolylineDecorators(layerGroups['Assets']);
        } else {
            console.error('Failed to fetch Assets GeoJSON:', results[2].reason);
        }*/

        // Add layer controls
        //L.control.layers(null, layerGroups, {collapsed: false}).addTo(map);

        map.addLayer(layerGroups['Overview']);

        // Fit map to the bounds of the first layer as default
        //map.fitBounds(layerGroups['Layer 1'].getBounds());

        // Fit map to combined bounds of all layers
        var combinedBounds = getCombinedBounds(layerGroups);
        map.fitBounds(combinedBounds);

    })
    .catch(error => console.error('Error fetching GeoJSON data:', error));
</script>

                
                                
        </div>



    </div>


</body>



<!-- Mirrored from localhost:2024/map.php by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 10 Oct 2024 16:22:56 GMT -->
</html>